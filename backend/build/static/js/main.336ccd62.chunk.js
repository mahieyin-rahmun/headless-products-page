(this["webpackJsonpheadless-products-client"]=this["webpackJsonpheadless-products-client"]||[]).push([[0],{102:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(25),i=r.n(o),c=r(8),s=r(9),l=r(11),u=r(10),p=r(7),m=r(107),d=r(22),h=r(12),g="/login",E="/login/failed/:data",f="/login/success/:data",O="/signup",y="/order",b="/",v="/api/v1/auth/google/login",T="/api/v1/auth/verify",I="/api/v1/auth/local/login",_="/api/v1/auth/local/signup",C="/api/v1/products",G="/api/v1/products/favorite",k="/api/v1/products/unfavorite",S=r(35),R=r(28),j=r(52),L=r(51),F=r(110),w=r(109),A=function(e){return function(t){return t({type:"FETCH_PRODUCTS_FAIL",payload:e})}},N=function(e){return function(t){return t({type:"FETCH_FAVORITE_PRODUCTS_FAILED",payload:e})}},D=function(e){return function(t){return t({type:"LOGIN_ERROR",payload:e})}},P=function(e){return function(t){return t({type:"SIGNUP_ERROR",payload:e})}},U=function(e){return function(t){return t({type:"ADD_TO_FAVORITES_FAILED",payload:e})}},W=function(e){return function(t){return t({type:"REMOVE_FROM_FAVORITES_FAILED",payload:e})}},M=r(24),V=r.n(M),K=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,{bg:"orange",sticky:"top",style:{background:"orange"},expand:"lg"},n.a.createElement(F.a.Brand,null,"Headless Products Page"),n.a.createElement(F.a.Toggle,{"aria-controls":"basic-navbar-nav"}),n.a.createElement(F.a.Collapse,{id:"basic-navbar-nav"},this.props.isUserAuthenticated?"":n.a.createElement(w.a,{className:"mr-auto"},n.a.createElement(w.a.Link,{href:g},"Login"),n.a.createElement(w.a.Link,{href:O},"Signup")),n.a.createElement(w.a,{className:"ml-auto"},this.props.isUserAuthenticated?n.a.createElement(w.a.Link,{onClick:function(){return e.props.logout()}},"Logout"):""))))}}]),r}(a.Component),x=Object(p.b)((function(e,t){return{isUserAuthenticated:e.auth.isUserAuthenticated}}),{logout:function(){return function(e){return window.localStorage.removeItem("userToken"),e({type:"LOGOUT"}),e((function(e){return e({type:"CLEAR_ERRORS"})}))}}})(K),B=r(112),H=r(104),z=r(14),q=function(e){return n.a.createElement(H.a,{variant:"primary",className:"float-right",style:{borderRadius:"50%",background:"orange",borderColor:"orange",position:"absolute",top:"1rem",right:"1rem"},onClick:e.onClick},n.a.createElement(z.a,{icon:e.icon}))},Q=function(e){return n.a.createElement(H.a,{variant:"primary",className:"float-right",style:{borderRadius:"50%",background:"orange",borderColor:"orange"},onClick:e.onClick,disabled:e.disabled},n.a.createElement(z.a,{icon:["fas","shopping-cart"]}))},Y=function(e){return function(t){return t({type:"REMOVE_FROM_CART",payload:e})}},Z=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).getQuantityText=function(e){switch(e){case"weight":return"1 kg";case"piece":return"1 pc";case"dozen":return"1 dozen";default:return"1 kg"}},e.addToCart=function(t,r){e.props.addToCart(t)},e.toggleProductIsFavorited=function(t,r,a){r?e.props.removeFromFavorites(t):e.props.addToFavorites(t)},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=!1,r=!1;return this.props.productID&&this.props.cart&&(t=!(-1===this.props.cart.findIndex((function(t){return t.productID===e.props.productID})))),this.props.favoritesList&&(r=!(-1===this.props.favoritesList.findIndex((function(t){return t===e.props.productID})))),n.a.createElement(n.a.Fragment,null,n.a.createElement(B.a,{style:{width:"15rem",margin:"1rem"}},n.a.createElement(B.a.Img,{variant:"top",src:this.props.productImage}),r?n.a.createElement(q,{onClick:this.toggleProductIsFavorited.bind(this,this.props.productID,r),icon:["fas","heart"]}):n.a.createElement(q,{onClick:this.toggleProductIsFavorited.bind(this,this.props.productID,r),icon:["far","heart"]}),n.a.createElement(B.a.Body,null,n.a.createElement(B.a.Title,null,this.props.productName),n.a.createElement(B.a.Text,null,"Quantity: ",this.getQuantityText(this.props.quantityType)),n.a.createElement(B.a.Title,null,"Price: BDT ",this.props.price),t?n.a.createElement(Q,{disabled:!0,onClick:this.addToCart.bind(this,this.props.productID)}):n.a.createElement(Q,{disabled:!1,onClick:this.addToCart.bind(this,this.props.productID)}))))}}]),r}(a.Component),$=Object(p.b)((function(e,t){return{cart:e.cart.cartProducts,favoritesList:e.products.favoritesList}}),{addToCart:function(e){return function(t,r){return t({type:"ADD_TO_CART",payload:r().products.productsList.filter((function(t){return t.productID===e}))[0]})}},addToFavorites:function(e){return function(t,r){var a=r().auth.userToken;t((function(e){return e({type:"TOGGLE_IS_WORKING"})})),V.a.post(G,{productID:e},{headers:{Authorization:"Bearer "+a}}).then((function(r){var a=r.data;switch(a.messageType){case"error":var n=a.messageBody;return t(U(n)),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}));case"success":return t({type:"ADD_TO_FAVORITES",payload:e}),t((function(e){return e({type:"ADD_TO_FAVORITES_SUCCESS"})})),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}));default:return t((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}})).catch((function(e){return t(U("Unknown error occured when communicating with the server")),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}))}},removeFromFavorites:function(e){return function(t,r){var a=r().auth.userToken;t((function(e){return e({type:"TOGGLE_IS_WORKING"})})),V.a.post(k,{productID:e},{headers:{Authorization:"Bearer "+a}}).then((function(r){var a=r.data;switch(a.messageType){case"error":var n=a.messageBody;return t(W(n)),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}));case"success":return t({type:"REMOVE_FROM_FAVORITES",payload:e}),t((function(e){return e({type:"REMOVE_FROM_FAVORITES_SUCCESS"})})),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}));default:return t((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}})).catch((function(e){return t(W("Unknown error occured when communicating with the server")),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}))}}})(Z),J=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchProducts(),this.props.getFavoriteProducts()}},{key:"render",value:function(){return n.a.createElement("div",{className:"row"},n.a.createElement(n.a.Fragment,null,this.props.products?this.props.products.map((function(e){return n.a.createElement($,{className:"col-3",key:e.productID,productID:e.productID,quantityType:e.quantityType,productName:e.name,price:e.price,productImage:e.imageURL})})):""))}}]),r}(a.Component),X=Object(p.b)((function(e,t){return{products:e.products.productsList,isVerifyingToken:e.ui.isVerifyingToken}}),{fetchProducts:function(){return function(e,t){var r=t().auth.userToken;e((function(e){return e({type:"TOGGLE_IS_WORKING"})})),V.a.get(C,{headers:{Authorization:"Bearer "+r}}).then((function(t){var r=t.data,a=r.messageType,n=r.messageBody;switch(a){case"error":return e(A(n)),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}));case"success":return e({type:"FETCH_PRODUCTS",payload:n}),e((function(e){return e({type:"FETCH_PRODUCTS_SUCCESS"})})),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}));default:return e((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}})).catch((function(t){return e(A("Unknown error occured when communicating with the server")),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}))}},getFavoriteProducts:function(){return function(e,t){var r=t().auth.userToken;e((function(e){return e({type:"TOGGLE_IS_WORKING"})})),V.a.get(G,{headers:{Authorization:"Bearer "+r}}).then((function(t){var r=t.data,a=r.messageType,n=r.messageBody;switch(a){case"error":return e(N(n)),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}));case"success":return e({type:"FETCH_FAVORITE_PRODUCTS",payload:n.productIDs}),e((function(e){return e({type:"FETCH_FAVORITE_PRODUCTS_SUCCESS"})})),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}));default:return e((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}})).catch((function(t){return e(N("Unknown error occured when communicating with the server")),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}))}}})(J),ee=r(17),te=r(108),re=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).onClickRemoveFromCart=function(t,r){e.props.removeFromCart(t)},e.handleUpdateQuantityClick=function(t,r){switch(r.target.name){case"increment":return e.props.updateQuantity(1,t);case"decrement":return e.props.updateQuantity(-1,t);default:return}},e}return Object(s.a)(r,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("img",{alt:"wat",src:this.props.productImage,width:"15%",height:"15%",style:{display:"inline-block",marginRight:"0.5rem"}}),n.a.createElement("p",{style:{display:"inline-block",fontSize:"0.9em",width:"3rem",marginRight:"2rem",marginTop:"1rem",wordWrap:"break-word"}},this.props.productName),n.a.createElement(te.a.Group,{style:{display:"inline-block"}},n.a.createElement(H.a,{variant:"sm",name:"increment",onClick:this.handleUpdateQuantityClick.bind(this,this.props.productID)},"+"),n.a.createElement(te.a.Control,{size:"sm",type:"text",style:{width:"3rem",display:"inline-block"},value:this.props.quantity,readOnly:!0}),n.a.createElement(H.a,{variant:"sm",name:"decrement",onClick:this.handleUpdateQuantityClick.bind(this,this.props.productID)},"-")),n.a.createElement("p",{style:{display:"inline-block",marginLeft:"0.5rem",marginTop:"0.5rem"}},"Price: ",this.props.quantity*this.props.price),n.a.createElement(H.a,{variant:"danger lg",className:"float-right",style:{position:"relative",marginTop:"0.5rem",borderRadius:"50%",marginLeft:"0.5rem"},onClick:this.onClickRemoveFromCart.bind(this,this.props.productID)},n.a.createElement(z.a,{icon:"ban"})))}}]),r}(a.Component),ae=Object(p.b)(null,{removeFromCart:Y,updateQuantity:function(e,t){return function(r){return r({type:"UPDATE_QUANTITY",payload:{quantity:e,productID:t}})}}})(re),ne=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).placeOrder=function(){e.props.cart.length>0&&e.props.history.push(y)},e.clearCart=function(){e.props.cart.forEach((function(t){e.props.removeFromCart(t.productID)}))},e}return Object(s.a)(r,[{key:"render",value:function(){var e=0;return this.props.cart&&this.props.cart.length>0&&this.props.cart.forEach((function(t){e+=t.price*t.quantity})),n.a.createElement(n.a.Fragment,null,n.a.createElement(B.a,{style:{width:"28rem",height:"50rem",marginTop:"1rem",marginLeft:"-1.5rem"}},n.a.createElement(B.a.Header,null,"Your Cart",n.a.createElement(z.a,{onClick:this.clearCart,icon:"trash-alt",style:{cursor:"pointer",float:"right",width:"1.5rem",height:"1.5rem"}})),n.a.createElement(B.a.Body,null,this.props.cart.length>0?this.props.cart.map((function(e){return n.a.createElement(ae,{key:e.productID,productID:e.productID,productImage:e.imageURL,productName:e.name,price:e.price,quantity:e.quantity})})):"You don't have any items in the cart"),n.a.createElement(H.a,{variant:"primary",style:{width:"40%",background:"orange",borderColor:"orange",position:"absolute",bottom:"1.5rem",left:"1rem"},onClick:this.placeOrder},"Place Order"),n.a.createElement("h5",{style:{position:"absolute",left:"13.5rem",bottom:"1.5rem",fontSize:"1.1rem"}},"Grand Total: BDT ",e.toFixed(2))))}}]),r}(a.Component),oe=Object(ee.compose)(Object(p.b)((function(e,t){return{cart:e.cart.cartProducts}}),{removeFromCart:Y}),h.g)(ne),ie=r(111),ce=r(105),se=function(e){return n.a.createElement(ie.a,{style:{marginTop:"1rem",width:"100%",display:"block",marginLeft:"auto",marginRight:"auto"},variant:e.variant},e.useSpinner?n.a.createElement(ce.a,{style:{display:"inline-block",marginRight:"2rem"},animation:"border",role:"status",variant:"sm"}):"",e.message)},le=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return n.a.createElement("div",{className:"row",style:{marginTop:"2rem"}},n.a.createElement("div",{className:"col-9"},this.props.isWorking?n.a.createElement(n.a.Fragment,null,n.a.createElement(se,{style:{display:"inline-block"},variant:"info",message:"Working, please wait...",useSpinner:!0})):"",n.a.createElement(X,null)),n.a.createElement("div",{className:"col-3"},n.a.createElement(oe,null)))}}]),r}(a.Component),ue=Object(p.b)((function(e,t){return{isWorking:e.ui.isWorking}}),{})(le),pe=r(30),me=r(4),de=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(c.a)(this,r),(e=t.call(this)).onGoogleLoginClick=function(){window.open(v,"_self")},e.onLoginClick=function(t){t.preventDefault();var r=e.state,a=r.email,n=r.password;if(""===a||""===n)return e.props.loginError("Please fill in all the fields!");e.props.loginLocal(a,n)},e.onHandleTextFieldChange=function(t){e.setState(Object(me.a)(Object(me.a)({},e.state),{},Object(pe.a)({},t.target.name,t.target.value)))},e.state={email:"",password:""},e}return Object(s.a)(r,[{key:"componentDidMount",value:function(){if(this.props.match.params.data){var e=this.props.match.params.data.split("&");if("error"===e[0].split("=")[1])this.props.loginError(e[1].split("=")[1]),this.props.history.push(g);else{var t=e[1].split("=")[1];this.props.loginOauthSuccess(t),this.props.history.push(b)}}}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(B.a,{style:{marginTop:"2rem",width:"30rem",display:"block",marginLeft:"auto",marginRight:"auto"}},this.props.loginErrorState.error&&this.props.loginErrorState.errorMessage?n.a.createElement(se,{variant:"danger",message:this.props.loginErrorState.errorMessage}):"",n.a.createElement(B.a.Header,null,n.a.createElement("h1",{style:{textAlign:"center"}},"Login")),n.a.createElement(B.a.Body,null,n.a.createElement(te.a,null,n.a.createElement(te.a.Group,{controlId:"formBasicEmail"},n.a.createElement(te.a.Label,null,"Email address"),n.a.createElement(te.a.Control,{onChange:this.onHandleTextFieldChange,type:"email",name:"email",placeholder:"e.g. myawesome.email@gmail.com"})),n.a.createElement(te.a.Group,{controlId:"formBasicPassword"},n.a.createElement(te.a.Label,null,"Password"),n.a.createElement(te.a.Control,{onChange:this.onHandleTextFieldChange,type:"password",name:"password",placeholder:"Your Secure Password"})),n.a.createElement(H.a,{style:{display:"block",marginLeft:"auto",marginRight:"auto",background:"orange",borderColor:"orange"},variant:"primary",type:"submit",onClick:this.onLoginClick},this.props.isWorking?n.a.createElement(ce.a,{animation:"border",role:"status",size:"sm"},n.a.createElement("span",{className:"sr-only"},"Please Wait")):"Login")),n.a.createElement("p",{className:"text mt-4",style:{textAlign:"center"}},"Alternatively, you can sign in using one of the following providers: "),n.a.createElement(H.a,{style:{background:"red",borderColor:"red",display:"block",marginTop:"2rem",marginLeft:"auto",marginRight:"auto"},onClick:this.onGoogleLoginClick},n.a.createElement(z.a,{className:"mr-3",icon:["fab","google"]}),"Login With Google"))))}}]),r}(a.Component),he=Object(p.b)((function(e,t){return{loginErrorState:e.ui.login,isWorking:e.ui.isWorking}}),{loginLocal:function(e,t){return function(r){r((function(e){return e({type:"TOGGLE_IS_WORKING"})})),V.a.post(I,{email:e,password:t}).then((function(e){var t=e.data.token;return window.localStorage.setItem("userToken",t),r({type:"LOGIN_SUCCESS",payload:t}),r((function(e){return e({type:"TOGGLE_IS_WORKING"})}))})).catch((function(e){var t=e.response.data,a=t.messageType,n=t.messageBody;return"error"===a?(r(D(n)),r({type:"LOGIN_FAIL"}),r((function(e){return e({type:"TOGGLE_IS_WORKING"})}))):(r(D("Unknown error when communicating with the server.")),r((function(e){return e({type:"TOGGLE_IS_WORKING"})})))}))}},loginOauthSuccess:function(e){return function(t){return window.localStorage.setItem("userToken",e),t({type:"LOGIN_SUCCESS",payload:e})}},loginError:D})(de),ge=r(106),Ee=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){var e=0;return this.props.cart&&this.props.cart.forEach((function(t){e+=t.quantity*t.price})),n.a.createElement("div",null,n.a.createElement(d.b,{to:"/"},n.a.createElement(z.a,{style:{marginTop:"2rem",width:"2rem",height:"2rem"},icon:"arrow-circle-left"})," "," ",n.a.createElement("h3",{style:{display:"inline-block"}},"Back to products page")),n.a.createElement("h1",{style:{display:"block",marginTop:"2rem",marginLeft:"auto",marginRight:"auto"}},"Confirm your order"),n.a.createElement(ge.a,{striped:!0,bordered:!0,hover:!0,className:"mt-4"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"#"),n.a.createElement("th",null,"Product Name"),n.a.createElement("th",null,"Unit Price (BDT.)"),n.a.createElement("th",null,"Quantity"),n.a.createElement("th",null,"Total Price (BDT.)"))),n.a.createElement("tbody",null,this.props.cart?this.props.cart.map((function(e,t){return n.a.createElement("tr",{key:e.productID},n.a.createElement("td",null,t+1),n.a.createElement("td",null,e.name),n.a.createElement("td",null,parseFloat(e.price).toFixed(2)),n.a.createElement("td",null,e.quantity),n.a.createElement("td",null,parseFloat(e.price*e.quantity).toFixed(2)))})):"",this.props.cart?n.a.createElement("tr",{style:{fontWeight:"bold"}},n.a.createElement("td",{colSpan:"4"}," Total "),n.a.createElement("td",null,"BDT. ",parseFloat(e).toFixed(2))):"")))}}]),r}(a.Component),fe=Object(p.b)((function(e,t){return{cart:e.cart.cartProducts}}),{})(Ee),Oe=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(c.a)(this,r),(e=t.call(this)).onGoogleLoginClick=function(){window.open(v,"_self")},e.onSignupClick=function(t){t.preventDefault();var r=e.state,a=r.email,n=r.password,o=r.username;return""===a||""===n||""===o?e.props.signupError("Please fill in all the required fields!"):n.length<6?e.props.signupError("Password must be at least 6 characters long!"):o.length<4?e.props.signupError("Username must be at least 4 characters long!"):/^[a-zA-Z0-9_]+$/.test(o)?/^[a-zA-Z0-9_.]+@[a-z]+\.[a-z]+$/.test(a)?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(n)?void e.props.signupLocal(o,a,n):e.props.signupError("Passwords must be a combination of uppercase letters, lowercase letters and numbers"):e.props.signupError("Invalid email"):e.props.signupError("Username can only contain alphabets, numbers and underscores!")},e.onHandleTextFieldChange=function(t){e.setState(Object(me.a)(Object(me.a)({},e.state),{},Object(pe.a)({},t.target.name,t.target.value)))},e.state={email:"",username:"",password:""},e}return Object(s.a)(r,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(B.a,{style:{marginTop:"2rem",width:"30rem",display:"block",marginLeft:"auto",marginRight:"auto"}},this.props.signupErrorState.error&&this.props.signupErrorState.errorMessage?n.a.createElement(se,{variant:"danger",message:this.props.signupErrorState.errorMessage}):"",n.a.createElement(B.a.Header,null,n.a.createElement("h1",{style:{textAlign:"center"}},"Sign Up")),n.a.createElement(B.a.Body,null,n.a.createElement(te.a,null,n.a.createElement(te.a.Group,{controlId:"formBasicUsername"},n.a.createElement(te.a.Label,null,"Username"),n.a.createElement(te.a.Control,{onChange:this.onHandleTextFieldChange,type:"text",name:"username",placeholder:"e.g. myawesome_name"})),n.a.createElement(te.a.Group,{controlId:"formBasicEmail"},n.a.createElement(te.a.Label,null,"Email address"),n.a.createElement(te.a.Control,{onChange:this.onHandleTextFieldChange,type:"email",name:"email",placeholder:"e.g. myawesome.email@gmail.com"})),n.a.createElement(te.a.Group,{controlId:"formBasicPassword"},n.a.createElement(te.a.Label,null,"Password"),n.a.createElement(te.a.Control,{onChange:this.onHandleTextFieldChange,type:"password",name:"password",placeholder:"Your Secure Password"})),n.a.createElement(H.a,{style:{display:"block",marginLeft:"auto",marginRight:"auto",background:"orange",borderColor:"orange"},variant:"primary",type:"submit",onClick:this.onSignupClick},this.props.isWorking?n.a.createElement(ce.a,{animation:"border",role:"status",size:"sm"},n.a.createElement("span",{className:"sr-only"},"Please Wait")):"Sign Up")),n.a.createElement("p",{className:"text mt-4",style:{textAlign:"center"}},"Alternatively, you can sign in using one of the following providers: "),n.a.createElement(H.a,{style:{background:"red",borderColor:"red",display:"block",marginTop:"2rem",marginLeft:"auto",marginRight:"auto"},onClick:this.onGoogleLoginClick},n.a.createElement(z.a,{className:"mr-3",icon:["fab","google"]}),"Login With Google"))))}}]),r}(a.Component),ye=Object(p.b)((function(e,t){return{signupErrorState:e.ui.signup,isWorking:e.ui.isWorking}}),{signupLocal:function(e,t,r){return function(a){a((function(e){return e({type:"TOGGLE_IS_WORKING"})})),V.a.post(_,{username:e,email:t,password:r}).then((function(e){var t=e.data.token;return window.localStorage.setItem("userToken",t),a({type:"LOGIN_SUCCESS",payload:t}),a((function(e){return e({type:"TOGGLE_IS_WORKING"})}))})).catch((function(e){var t=e.response.data,r=t.messageType,n=t.messageBody;return"error"===r?(a(P(n)),a({type:"SIGNUP_FAIL"}),a((function(e){return e({type:"TOGGLE_IS_WORKING"})}))):(a(P("Unknown error when communicating with the server.")),a((function(e){return e({type:"TOGGLE_IS_WORKING"})})))}))}},signupError:P})(Oe);var be=function(){return n.a.createElement("div",{className:"mt-4",style:{display:"inline-block",marginLeft:"auto",marginRight:"auto"}},n.a.createElement("h1",null,"The page was not found."),n.a.createElement(d.b,{to:"/"},n.a.createElement(z.a,{style:{marginTop:"2rem",width:"2rem",height:"2rem"},icon:"arrow-circle-left"})," "," ",n.a.createElement("h3",{style:{display:"inline-block"}},"Back to products page")))};var ve=Object(ee.compose)(Object(p.b)((function(e,t){return{isUserAuthenticated:e.auth.isUserAuthenticated}}),{}),(function(e){return function(t){Object(l.a)(a,t);var r=Object(u.a)(a);function a(){return Object(c.a)(this,a),r.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.props.isUserAuthenticated?n.a.createElement(e,this.props):n.a.createElement(h.a,{to:g}))}}]),a}(a.Component)}));var Te=Object(ee.compose)(Object(p.b)((function(e,t){return{isUserAuthenticated:e.auth.isUserAuthenticated}}),{}),(function(e){return function(t){Object(l.a)(a,t);var r=Object(u.a)(a);function a(){return Object(c.a)(this,a),r.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.props.isUserAuthenticated?n.a.createElement(h.a,{to:b}):n.a.createElement(e,this.props))}}]),a}(a.Component)}));S.b.add(R.f,L.b,j.b,j.a,R.c,L.a,R.d,R.b,R.a,R.e);var Ie=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return this.props.isVerifyingToken?null:n.a.createElement("div",null,n.a.createElement(x,null),n.a.createElement(m.a,null,n.a.createElement(d.a,null,n.a.createElement(h.d,null,n.a.createElement(h.b,{exact:!0,path:g,component:Te(he)}),n.a.createElement(h.b,{exact:!0,path:f,component:Te(he)}),n.a.createElement(h.b,{exact:!0,path:E,component:Te(he)}),n.a.createElement(h.b,{exact:!0,path:O,component:Te(ye)}),n.a.createElement(h.b,{exact:!0,path:y,component:ve(fe)}),n.a.createElement(h.b,{exact:!0,path:b,component:ve(ue)}),n.a.createElement(h.b,{component:be})))))}}]),r}(a.Component),_e=Object(p.b)((function(e,t){return{isVerifyingToken:e.ui.isVerifyingToken}}),{})(Ie);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ce=r(70),Ge=r(71),ke=r(37),Se={productsList:null,favoritesList:null},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS":return Object(me.a)(Object(me.a)({},e),{},{productsList:t.payload});case"FETCH_FAVORITE_PRODUCTS":return Object(me.a)(Object(me.a)({},e),{},{favoritesList:t.payload});case"ADD_TO_FAVORITES":return Object(me.a)(Object(me.a)({},e),{},{favoritesList:[].concat(Object(ke.a)(e.favoritesList),[t.payload])});case"REMOVE_FROM_FAVORITES":return Object(me.a)(Object(me.a)({},e),{},{favoritesList:e.favoritesList.filter((function(e){return e!==t.payload}))});default:return e}},je={fetchProducts:{error:!1,errorMessage:null},fetchFavoriteProducts:{error:!1,errorMessage:null},addToFavorites:{error:!1,errorMessage:null},removeFromFavorites:{error:!1,errorMessage:null},login:{error:!1,errorMessage:null},signup:{error:!1,errorMessage:null},isVerifyingToken:!1,isWorking:!1},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_IS_WORKING":return Object(me.a)(Object(me.a)({},e),{},{isWorking:!e.isWorking});case"FETCH_PRODUCTS_SUCCESS":return Object(me.a)(Object(me.a)({},e),{},{fetchProducts:{error:!1,errorMessage:null}});case"FETCH_PRODUCTS_FAIL":return Object(me.a)(Object(me.a)({},e),{},{fetchProducts:{error:!0,errorMessage:t.payload}});case"FETCH_FAVORITE_PRODUCTS_FAILED":return Object(me.a)(Object(me.a)({},e),{},{fetchFavoriteProducts:{error:!0,errorMessage:t.payload}});case"FETCH_FAVORITE_PRODUCTS_SUCCESS":return Object(me.a)(Object(me.a)({},e),{},{fetchFavoriteProducts:{error:!1,errorMessage:null}});case"ADD_TO_FAVORITES_FAILED":return Object(me.a)(Object(me.a)({},e),{},{addToFavorites:{error:!0,errorMessage:t.payload}});case"ADD_TO_FAVORITES_SUCCESS":return Object(me.a)(Object(me.a)({},e),{},{addToFavorites:{error:!1,errorMessage:null}});case"REMOVE_FROM_FAVORITES_FAILED":return Object(me.a)(Object(me.a)({},e),{},{removeFromFavorites:{error:!0,errorMessage:t.payload}});case"REMOVE_FROM_FAVORITES_SUCCESS":return Object(me.a)(Object(me.a)({},e),{},{removeFromFavorites:{error:!1,errorMessage:null}});case"CLEAR_ERRORS":return Object(me.a)(Object(me.a)({},e),{},{fetchProducts:{error:!1,errorMessage:null},addToFavorites:{error:!1,errorMessage:null},removeFromFavorites:{error:!1,errorMessage:null},login:{error:!1,errorMessage:null},signup:{error:!1,errorMessage:null},fetchFavoriteProducts:{error:!1,errorMessage:null}});case"LOGIN_ERROR":return Object(me.a)(Object(me.a)({},e),{},{login:{error:!0,errorMessage:t.payload}});case"SIGNUP_ERROR":return Object(me.a)(Object(me.a)({},e),{},{signup:{error:!0,errorMessage:t.payload}});case"TOGGLE_VERIFYING_TOKEN":return Object(me.a)(Object(me.a)({},e),{},{isVerifyingToken:!e.isVerifyingToken});default:return e}},Fe={cartProducts:[]},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":var r=t.payload;return r.quantity=1,Object(me.a)(Object(me.a)({},e),{},{cartProducts:e.cartProducts.concat(r)});case"REMOVE_FROM_CART":return Object(me.a)(Object(me.a)({},e),{},{cartProducts:e.cartProducts.filter((function(e){return e.productID!==t.payload}))});case"UPDATE_QUANTITY":var a=t.payload,n=a.quantity,o=a.productID,i=e.cartProducts.findIndex((function(e){return e.productID===o})),c=e.cartProducts[i].quantity;return c>0&&0===(c+=n)&&(c=1),Object(me.a)(Object(me.a)({},e),{},{cartProducts:[].concat(Object(ke.a)(e.cartProducts.slice(0,i)),[Object(me.a)(Object(me.a)({},e.cartProducts[i]),{},{quantity:c})],Object(ke.a)(e.cartProducts.slice(i+1)))});default:return e}},Ae={isUserAuthenticated:!1,userToken:null},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(me.a)(Object(me.a)({},e),{},{isUserAuthenticated:!0,userToken:t.payload});case"LOGIN_FAIL":case"SIGNUP_FAIL":case"LOGOUT":return Object(me.a)(Object(me.a)({},e),{},{isUserAuthenticated:!1,userToken:null});default:return e}},De=Object(ee.combineReducers)({products:Re,ui:Le,cart:we,auth:Ne}),Pe=[Ge.a],Ue=Object(ee.createStore)(De,{},Object(Ce.composeWithDevTools)(ee.applyMiddleware.apply(void 0,Pe)));r(101);Ue.dispatch((function(e){e((function(e){return e({type:"TOGGLE_VERIFYING_TOKEN"})}));var t=window.localStorage.getItem("userToken");if(!t)return e({type:"LOGIN_FAIL"}),e(D(null)),e((function(e){return e({type:"TOGGLE_VERIFYING_TOKEN"})}));V.a.get(T,{headers:{Authorization:"Bearer "+t}}).then((function(r){return e({type:"LOGIN_SUCCESS",payload:t}),e((function(e){return e({type:"TOGGLE_VERIFYING_TOKEN"})}))})).catch((function(t){return 401===t.response.status?(e({type:"LOGIN_FAIL"}),e(D(null)),e((function(e){return e({type:"TOGGLE_VERIFYING_TOKEN"})}))):(e(D("Unknown error when communicating with the server.")),e((function(e){return e({type:"TOGGLE_VERIFYING_TOKEN"})})))}))})),i.a.render(n.a.createElement(p.a,{store:Ue},n.a.createElement(n.a.StrictMode,null,n.a.createElement(_e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,r){e.exports=r(102)}},[[72,1,2]]]);
//# sourceMappingURL=main.336ccd62.chunk.js.map