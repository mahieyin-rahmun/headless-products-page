(this["webpackJsonpheadless-products-client"]=this["webpackJsonpheadless-products-client"]||[]).push([[0],{102:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(25),c=r.n(o),i=r(8),s=r(9),u=r(11),l=r(10),p=r(7),d=r(107),m=r(17),h=r(12),g="/login",E="/login/failed/:data",O="/login/success/:data",f="/signup",y="/order",b="/orders",v="/",T="/api/v1/auth/google/login",_="/api/v1/auth/verify",I="/api/v1/auth/local/login",C="/api/v1/auth/local/signup",R="/api/v1/products",G="/api/v1/products/favorite",S="/api/v1/products/unfavorite",k="/api/v1/products/confirmorder",j="/api/v1/products/orders",L=r(35),F=r(28),w=r(52),D=r(51),A=r(110),N=r(109),P=function(e){return function(t){return t({type:"FETCH_PRODUCTS_FAIL",payload:e})}},U=function(e){return function(t){return t({type:"FETCH_FAVORITE_PRODUCTS_FAILED",payload:e})}},W=function(){return function(e){return e({type:"CLEAR_ERRORS"})}},M=function(e){return function(t){return t({type:"LOGIN_ERROR",payload:e})}},K=function(e){return function(t){return t({type:"SIGNUP_ERROR",payload:e})}},V=function(e){return function(t){return t({type:"ADD_TO_FAVORITES_FAILED",payload:e})}},B=function(e){return function(t){return t({type:"REMOVE_FROM_FAVORITES_FAILED",payload:e})}},x=function(e){return function(t){return t({type:"ORDER_FAILED",payload:e})}},H=function(e){return function(t){return t({type:"FETCH_ORDERS_FAILED",payload:e})}},z=r(22),q=r.n(z),Q=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{bg:"orange",sticky:"top",style:{background:"orange"},expand:"lg"},n.a.createElement(A.a.Brand,null,"Headless Products Page"),n.a.createElement(A.a.Toggle,{"aria-controls":"basic-navbar-nav"}),n.a.createElement(A.a.Collapse,{id:"basic-navbar-nav"},this.props.isUserAuthenticated?n.a.createElement(N.a,{className:"mr-auto"},n.a.createElement(m.b,{style:{textDecoration:"none",color:"white"},to:b}," View Orders ")):n.a.createElement(N.a,{className:"mr-auto"},n.a.createElement(N.a.Link,{href:g},"Login"),n.a.createElement(N.a.Link,{href:f},"Signup")),n.a.createElement(N.a,{className:"ml-auto"},this.props.isUserAuthenticated?n.a.createElement(N.a.Link,{onClick:function(){return e.props.logout()}},"Logout"):""))))}}]),r}(a.Component),Y=Object(p.b)((function(e,t){return{isUserAuthenticated:e.auth.isUserAuthenticated}}),{logout:function(){return function(e){return window.localStorage.removeItem("userToken"),e({type:"LOGOUT"}),e((function(e){return e({type:"CLEAR_ERRORS"})}))}}})(Q),Z=r(112),$=r(104),J=r(14),X=function(e){return n.a.createElement($.a,{variant:"primary",className:"float-right",style:{borderRadius:"50%",background:"orange",borderColor:"orange",position:"absolute",top:"1rem",right:"1rem"},onClick:e.onClick},n.a.createElement(J.a,{icon:e.icon}))},ee=function(e){return n.a.createElement($.a,{variant:"primary",className:"float-right",style:{borderRadius:"50%",background:"orange",borderColor:"orange"},onClick:e.onClick,disabled:e.disabled},n.a.createElement(J.a,{icon:["fas","shopping-cart"]}))},te=function(e){return function(t){return t({type:"REMOVE_FROM_CART",payload:e})}},re=function(){return function(e){return e({type:"CLEAR_CART"})}},ae=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).getQuantityText=function(e){switch(e){case"weight":return"1 kg";case"piece":return"1 pc";case"dozen":return"1 dozen";default:return"1 kg"}},e.addToCart=function(t,r){e.props.addToCart(t)},e.toggleProductIsFavorited=function(t,r,a){r?e.props.removeFromFavorites(t):e.props.addToFavorites(t)},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=!1,r=!1;return this.props.productID&&this.props.cart&&(t=!(-1===this.props.cart.findIndex((function(t){return t.productID===e.props.productID})))),this.props.favoritesList&&(r=!(-1===this.props.favoritesList.findIndex((function(t){return t===e.props.productID})))),n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.a,{style:{width:"15rem",margin:"1rem"}},n.a.createElement(Z.a.Img,{variant:"top",src:this.props.productImage}),r?n.a.createElement(X,{onClick:this.toggleProductIsFavorited.bind(this,this.props.productID,r),icon:["fas","heart"]}):n.a.createElement(X,{onClick:this.toggleProductIsFavorited.bind(this,this.props.productID,r),icon:["far","heart"]}),n.a.createElement(Z.a.Body,null,n.a.createElement(Z.a.Title,null,this.props.productName),n.a.createElement(Z.a.Text,null,"Quantity: ",this.getQuantityText(this.props.quantityType)),n.a.createElement(Z.a.Title,null,"Price: BDT ",this.props.price),t?n.a.createElement(ee,{disabled:!0,onClick:this.addToCart.bind(this,this.props.productID)}):n.a.createElement(ee,{disabled:!1,onClick:this.addToCart.bind(this,this.props.productID)}))))}}]),r}(a.Component),ne=Object(p.b)((function(e,t){return{cart:e.cart.cartProducts,favoritesList:e.products.favoritesList}}),{addToCart:function(e){return function(t,r){return t({type:"ADD_TO_CART",payload:r().products.productsList.filter((function(t){return t.productID===e}))[0]})}},addToFavorites:function(e){return function(t,r){var a=r().auth.userToken;t((function(e){return e({type:"TOGGLE_IS_WORKING"})})),q.a.post(G,{productID:e},{headers:{Authorization:"Bearer "+a}}).then((function(r){var a=r.data;switch(a.messageType){case"error":var n=a.messageBody;return t(V(n)),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}));case"success":return t({type:"ADD_TO_FAVORITES",payload:e}),t((function(e){return e({type:"ADD_TO_FAVORITES_SUCCESS"})})),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}));default:return t((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}})).catch((function(e){return t(V("Unknown error occured when communicating with the server")),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}))}},removeFromFavorites:function(e){return function(t,r){var a=r().auth.userToken;t((function(e){return e({type:"TOGGLE_IS_WORKING"})})),q.a.post(S,{productID:e},{headers:{Authorization:"Bearer "+a}}).then((function(r){var a=r.data;switch(a.messageType){case"error":var n=a.messageBody;return t(B(n)),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}));case"success":return t({type:"REMOVE_FROM_FAVORITES",payload:e}),t((function(e){return e({type:"REMOVE_FROM_FAVORITES_SUCCESS"})})),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}));default:return t((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}})).catch((function(e){return t(B("Unknown error occured when communicating with the server")),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}))}}})(ae),oe=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchProducts(),this.props.getFavoriteProducts()}},{key:"render",value:function(){return n.a.createElement("div",{className:"row"},n.a.createElement(n.a.Fragment,null,this.props.products?this.props.products.map((function(e){return n.a.createElement(ne,{className:"col-3",key:e.productID,productID:e.productID,quantityType:e.quantityType,productName:e.name,price:e.price,productImage:e.imageURL})})):""))}}]),r}(a.Component),ce=Object(p.b)((function(e,t){return{products:e.products.productsList,isVerifyingToken:e.ui.isVerifyingToken}}),{fetchProducts:function(){return function(e,t){var r=t().auth.userToken;e((function(e){return e({type:"TOGGLE_IS_WORKING"})})),q.a.get(R,{headers:{Authorization:"Bearer "+r}}).then((function(t){var r=t.data,a=r.messageType,n=r.messageBody;switch(a){case"error":return e(P(n)),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}));case"success":return e({type:"FETCH_PRODUCTS",payload:n}),e((function(e){return e({type:"FETCH_PRODUCTS_SUCCESS"})})),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}));default:return e((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}})).catch((function(t){return e(P("Unknown error occured when communicating with the server")),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}))}},getFavoriteProducts:function(){return function(e,t){var r=t().auth.userToken;e((function(e){return e({type:"TOGGLE_IS_WORKING"})})),q.a.get(G,{headers:{Authorization:"Bearer "+r}}).then((function(t){var r=t.data,a=r.messageType,n=r.messageBody;switch(a){case"error":return e(U(n)),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}));case"success":return e({type:"FETCH_FAVORITE_PRODUCTS",payload:n.productIDs}),e((function(e){return e({type:"FETCH_FAVORITE_PRODUCTS_SUCCESS"})})),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}));default:return e((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}})).catch((function(t){return e(U("Unknown error occured when communicating with the server")),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}))}}})(oe),ie=r(18),se=r(108),ue=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).onClickRemoveFromCart=function(t,r){e.props.removeFromCart(t)},e.handleUpdateQuantityClick=function(t,r){switch(r.target.name){case"increment":return e.props.updateQuantity(1,t);case"decrement":return e.props.updateQuantity(-1,t);default:return}},e}return Object(s.a)(r,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("img",{alt:"wat",src:this.props.productImage,width:"15%",height:"15%",style:{display:"inline-block",marginRight:"0.5rem"}}),n.a.createElement("p",{style:{display:"inline-block",fontSize:"0.9em",width:"3rem",marginRight:"2rem",marginTop:"1rem",wordWrap:"break-word"}},this.props.productName),n.a.createElement(se.a.Group,{style:{display:"inline-block"}},n.a.createElement($.a,{variant:"sm",name:"increment",onClick:this.handleUpdateQuantityClick.bind(this,this.props.productID)},"+"),n.a.createElement(se.a.Control,{size:"sm",type:"text",style:{width:"3rem",display:"inline-block"},value:this.props.quantity,readOnly:!0}),n.a.createElement($.a,{variant:"sm",name:"decrement",onClick:this.handleUpdateQuantityClick.bind(this,this.props.productID)},"-")),n.a.createElement("p",{style:{display:"inline-block",marginLeft:"0.5rem",marginTop:"0.5rem"}},"Price: ",this.props.quantity*this.props.price),n.a.createElement($.a,{variant:"danger lg",className:"float-right",style:{position:"relative",marginTop:"0.5rem",borderRadius:"50%",marginLeft:"0.5rem"},onClick:this.onClickRemoveFromCart.bind(this,this.props.productID)},n.a.createElement(J.a,{icon:"ban"})))}}]),r}(a.Component),le=Object(p.b)(null,{removeFromCart:te,updateQuantity:function(e,t){return function(r){return r({type:"UPDATE_QUANTITY",payload:{quantity:e,productID:t}})}}})(ue),pe=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).placeOrder=function(){e.props.cart.length>0&&e.props.history.push(y)},e.clearCartProducts=function(){e.props.clearCart()},e}return Object(s.a)(r,[{key:"render",value:function(){var e=0;return this.props.cart&&this.props.cart.length>0&&this.props.cart.forEach((function(t){e+=t.price*t.quantity})),n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.a,{style:{width:"28rem",height:"50rem",marginTop:"1rem",marginLeft:"-1.5rem"}},n.a.createElement(Z.a.Header,null,"Your Cart",n.a.createElement(J.a,{onClick:this.clearCartProducts,icon:"trash-alt",style:{cursor:"pointer",float:"right",width:"1.5rem",height:"1.5rem"}})),n.a.createElement(Z.a.Body,null,this.props.cart.length>0?this.props.cart.map((function(e){return n.a.createElement(le,{key:e.productID,productID:e.productID,productImage:e.imageURL,productName:e.name,price:e.price,quantity:e.quantity})})):"You don't have any items in the cart"),n.a.createElement($.a,{variant:"primary",style:{width:"40%",background:"orange",borderColor:"orange",position:"absolute",bottom:"1.5rem",left:"1rem"},onClick:this.placeOrder},"Place Order"),n.a.createElement("h5",{style:{position:"absolute",left:"13.5rem",bottom:"1.5rem",fontSize:"1.1rem"}},"Grand Total: BDT ",e.toFixed(2))))}}]),r}(a.Component),de=Object(ie.compose)(Object(p.b)((function(e,t){return{cart:e.cart.cartProducts}}),{removeFromCart:te,clearCart:re}),h.g)(pe),me=r(111),he=r(105),ge=function(e){return n.a.createElement(me.a,{style:{marginTop:"1rem",width:"100%",display:"block",marginLeft:"auto",marginRight:"auto"},variant:e.variant},e.useSpinner?n.a.createElement(he.a,{style:{display:"inline-block",marginRight:"2rem"},animation:"border",role:"status",variant:"sm"}):"",e.message)},Ee=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return n.a.createElement("div",{className:"row",style:{marginTop:"2rem"}},n.a.createElement("div",{className:"col-9"},this.props.isWorking?n.a.createElement(n.a.Fragment,null,n.a.createElement(ge,{style:{display:"inline-block"},variant:"info",message:"Working, please wait...",useSpinner:!0})):"",n.a.createElement(ce,null)),n.a.createElement("div",{className:"col-3"},n.a.createElement(de,null)))}}]),r}(a.Component),Oe=Object(p.b)((function(e,t){return{isWorking:e.ui.isWorking}}),{})(Ee),fe=r(30),ye=r(3),be=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.call(this)).onGoogleLoginClick=function(){window.open(T,"_self")},e.onLoginClick=function(t){t.preventDefault();var r=e.state,a=r.email,n=r.password;if(""===a||""===n)return e.props.loginError("Please fill in all the fields!");e.props.loginLocal(a,n)},e.onHandleTextFieldChange=function(t){e.setState(Object(ye.a)(Object(ye.a)({},e.state),{},Object(fe.a)({},t.target.name,t.target.value)))},e.state={email:"",password:""},e}return Object(s.a)(r,[{key:"componentDidMount",value:function(){if(this.props.match.params.data){var e=this.props.match.params.data.split("&");if("error"===e[0].split("=")[1])this.props.loginError(e[1].split("=")[1]),this.props.history.push(g);else{var t=e[1].split("=")[1];this.props.loginOauthSuccess(t),this.props.history.push(v)}}}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.a,{style:{marginTop:"2rem",width:"30rem",display:"block",marginLeft:"auto",marginRight:"auto"}},this.props.loginErrorState.error&&this.props.loginErrorState.errorMessage?n.a.createElement(ge,{variant:"danger",message:this.props.loginErrorState.errorMessage}):"",n.a.createElement(Z.a.Header,null,n.a.createElement("h1",{style:{textAlign:"center"}},"Login")),n.a.createElement(Z.a.Body,null,n.a.createElement(se.a,null,n.a.createElement(se.a.Group,{controlId:"formBasicEmail"},n.a.createElement(se.a.Label,null,"Email address"),n.a.createElement(se.a.Control,{onChange:this.onHandleTextFieldChange,type:"email",name:"email",placeholder:"e.g. myawesome.email@gmail.com"})),n.a.createElement(se.a.Group,{controlId:"formBasicPassword"},n.a.createElement(se.a.Label,null,"Password"),n.a.createElement(se.a.Control,{onChange:this.onHandleTextFieldChange,type:"password",name:"password",placeholder:"Your Secure Password"})),n.a.createElement($.a,{style:{display:"block",marginLeft:"auto",marginRight:"auto",background:"orange",borderColor:"orange"},variant:"primary",type:"submit",onClick:this.onLoginClick},this.props.isWorking?n.a.createElement(he.a,{animation:"border",role:"status",size:"sm"},n.a.createElement("span",{className:"sr-only"},"Please Wait")):"Login")),n.a.createElement("p",{className:"text mt-4",style:{textAlign:"center"}},"Alternatively, you can sign in using one of the following providers: "),n.a.createElement($.a,{style:{background:"red",borderColor:"red",display:"block",marginTop:"2rem",marginLeft:"auto",marginRight:"auto"},onClick:this.onGoogleLoginClick},n.a.createElement(J.a,{className:"mr-3",icon:["fab","google"]}),"Login With Google"))))}}]),r}(a.Component),ve=Object(p.b)((function(e,t){return{loginErrorState:e.ui.login,isWorking:e.ui.isWorking}}),{loginLocal:function(e,t){return function(r){r((function(e){return e({type:"TOGGLE_IS_WORKING"})})),q.a.post(I,{email:e,password:t}).then((function(e){var t=e.data.token;return window.localStorage.setItem("userToken",t),r({type:"LOGIN_SUCCESS",payload:t}),r((function(e){return e({type:"TOGGLE_IS_WORKING"})}))})).catch((function(e){var t=e.response.data,a=t.messageType,n=t.messageBody;return"error"===a?(r(M(n)),r({type:"LOGIN_FAIL"}),r((function(e){return e({type:"TOGGLE_IS_WORKING"})}))):(r(M("Unknown error when communicating with the server.")),r((function(e){return e({type:"TOGGLE_IS_WORKING"})})))}))}},loginOauthSuccess:function(e){return function(t){return window.localStorage.setItem("userToken",e),t({type:"LOGIN_SUCCESS",payload:e})}},loginError:M})(be),Te=r(106),_e=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.call(this)).handlePlaceOrder=function(){for(var t=e.props.cart,r=[],a=0;a<t.length;a++){var n=t[a],o={productID:n.productID,price:n.price,quantity:n.quantity};r.push(o)}e.props.placeOrder(r)},e.state={redirect:!1},e}return Object(s.a)(r,[{key:"componentDidUpdate",value:function(){var e=this;this.props.order.success&&(this.timer=setTimeout((function(){e.props.clearCart(),e.props.clearErrors(),e.props.history.push(v)}),5e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=0;return this.props.cart&&this.props.cart.forEach((function(t){e+=t.quantity*t.price})),n.a.createElement("div",null,n.a.createElement(m.b,{to:"/"},n.a.createElement(J.a,{style:{marginTop:"2rem",width:"2rem",height:"2rem"},icon:"arrow-circle-left"})," "," ",n.a.createElement("h3",{style:{display:"inline-block"}},"Back to products page")),this.props.order&&this.props.order.errorMessage?n.a.createElement(ge,{variant:"danger",message:this.props.order.errorMessage}):"",this.props.order&&this.props.order.success?n.a.createElement(ge,{variant:"success",message:"Order placed succssfully. Redirecting you in 5 seconds."}):"",n.a.createElement("h1",{style:{display:"block",marginTop:"2rem",marginLeft:"auto",marginRight:"auto"}},"Confirm your order"),n.a.createElement(Te.a,{striped:!0,bordered:!0,hover:!0,className:"mt-4"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"#"),n.a.createElement("th",null,"Product Name"),n.a.createElement("th",null,"Unit Price (BDT.)"),n.a.createElement("th",null,"Quantity"),n.a.createElement("th",null,"Total Price (BDT.)"))),n.a.createElement("tbody",null,this.props.cart?this.props.cart.map((function(e,t){return n.a.createElement("tr",{key:e.productID},n.a.createElement("td",null,t+1),n.a.createElement("td",null,e.name),n.a.createElement("td",null,parseFloat(e.price).toFixed(2)),n.a.createElement("td",null,e.quantity),n.a.createElement("td",null,parseFloat(e.price*e.quantity).toFixed(2)))})):"",this.props.cart?n.a.createElement("tr",{style:{fontWeight:"bold"}},n.a.createElement("td",{colSpan:"4"}," Total "),n.a.createElement("td",null,"BDT. ",parseFloat(e).toFixed(2))):"")),this.props.isWorking||this.props.order.success?n.a.createElement($.a,{onClick:this.handlePlaceOrder,variant:"primary",style:{backgroundColor:"orange",borderColor:"orange"},disabled:!0},"Place Order"):n.a.createElement($.a,{onClick:this.handlePlaceOrder,variant:"primary",style:{backgroundColor:"orange",borderColor:"orange"}},"Place Order"))}}]),r}(a.Component),Ie=Object(p.b)((function(e,t){return{cart:e.cart.cartProducts,order:e.ui.order,isWorking:e.ui.isWorking}}),{placeOrder:function(e){return function(t,r){var a=r().auth.userToken;t((function(e){return e({type:"TOGGLE_IS_WORKING"})})),q.a.post(k,{products:e},{headers:{Authorization:"Bearer "+a}}).then((function(e){var r=e.data,a=r.messageType,n=r.messageBody;switch(a){case"error":return t(x(n)),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}));case"success":return t({type:"PLACE_ORDER",payload:n}),t((function(e){return e({type:"ORDER_SUCCESS"})})),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}));default:return t((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}})).catch((function(e){return t(x("Unknown error occured when communicating with the server")),t((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}))}},clearCart:re,clearErrors:W})(_e),Ce=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.call(this)).onGoogleLoginClick=function(){window.open(T,"_self")},e.onSignupClick=function(t){t.preventDefault();var r=e.state,a=r.email,n=r.password,o=r.username;return""===a||""===n||""===o?e.props.signupError("Please fill in all the required fields!"):n.length<6?e.props.signupError("Password must be at least 6 characters long!"):o.length<4?e.props.signupError("Username must be at least 4 characters long!"):/^[a-zA-Z0-9_]+$/.test(o)?/^[a-zA-Z0-9_.]+@[a-z]+\.[a-z]+$/.test(a)?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(n)?void e.props.signupLocal(o,a,n):e.props.signupError("Passwords must be a combination of uppercase letters, lowercase letters and numbers"):e.props.signupError("Invalid email"):e.props.signupError("Username can only contain alphabets, numbers and underscores!")},e.onHandleTextFieldChange=function(t){e.setState(Object(ye.a)(Object(ye.a)({},e.state),{},Object(fe.a)({},t.target.name,t.target.value)))},e.state={email:"",username:"",password:""},e}return Object(s.a)(r,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.a,{style:{marginTop:"2rem",width:"30rem",display:"block",marginLeft:"auto",marginRight:"auto"}},this.props.signupErrorState.error&&this.props.signupErrorState.errorMessage?n.a.createElement(ge,{variant:"danger",message:this.props.signupErrorState.errorMessage}):"",n.a.createElement(Z.a.Header,null,n.a.createElement("h1",{style:{textAlign:"center"}},"Sign Up")),n.a.createElement(Z.a.Body,null,n.a.createElement(se.a,null,n.a.createElement(se.a.Group,{controlId:"formBasicUsername"},n.a.createElement(se.a.Label,null,"Username"),n.a.createElement(se.a.Control,{onChange:this.onHandleTextFieldChange,type:"text",name:"username",placeholder:"e.g. myawesome_name"})),n.a.createElement(se.a.Group,{controlId:"formBasicEmail"},n.a.createElement(se.a.Label,null,"Email address"),n.a.createElement(se.a.Control,{onChange:this.onHandleTextFieldChange,type:"email",name:"email",placeholder:"e.g. myawesome.email@gmail.com"})),n.a.createElement(se.a.Group,{controlId:"formBasicPassword"},n.a.createElement(se.a.Label,null,"Password"),n.a.createElement(se.a.Control,{onChange:this.onHandleTextFieldChange,type:"password",name:"password",placeholder:"Your Secure Password"})),n.a.createElement($.a,{style:{display:"block",marginLeft:"auto",marginRight:"auto",background:"orange",borderColor:"orange"},variant:"primary",type:"submit",onClick:this.onSignupClick},this.props.isWorking?n.a.createElement(he.a,{animation:"border",role:"status",size:"sm"},n.a.createElement("span",{className:"sr-only"},"Please Wait")):"Sign Up")),n.a.createElement("p",{className:"text mt-4",style:{textAlign:"center"}},"Alternatively, you can sign in using one of the following providers: "),n.a.createElement($.a,{style:{background:"red",borderColor:"red",display:"block",marginTop:"2rem",marginLeft:"auto",marginRight:"auto"},onClick:this.onGoogleLoginClick},n.a.createElement(J.a,{className:"mr-3",icon:["fab","google"]}),"Login With Google"))))}}]),r}(a.Component),Re=Object(p.b)((function(e,t){return{signupErrorState:e.ui.signup,isWorking:e.ui.isWorking}}),{signupLocal:function(e,t,r){return function(a){a((function(e){return e({type:"TOGGLE_IS_WORKING"})})),q.a.post(C,{username:e,email:t,password:r}).then((function(e){var t=e.data.token;return window.localStorage.setItem("userToken",t),a({type:"LOGIN_SUCCESS",payload:t}),a((function(e){return e({type:"TOGGLE_IS_WORKING"})}))})).catch((function(e){var t=e.response.data,r=t.messageType,n=t.messageBody;return"error"===r?(a(K(n)),a({type:"SIGNUP_FAIL"}),a((function(e){return e({type:"TOGGLE_IS_WORKING"})}))):(a(K("Unknown error when communicating with the server.")),a((function(e){return e({type:"TOGGLE_IS_WORKING"})})))}))}},signupError:K})(Ce),Ge=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchOrders()}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(m.b,{to:"/"},n.a.createElement(J.a,{style:{marginTop:"2rem",width:"2rem",height:"2rem"},icon:"arrow-circle-left"})," "," ",n.a.createElement("h3",{style:{display:"inline-block"}},"Back to products page")),this.props.isWorking?n.a.createElement(ge,{variant:"info",message:"Loading orders...",useSpinner:!0}):"",n.a.createElement(Te.a,{striped:!0,bordered:!0,hover:!0,className:"mt-4"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"#"),n.a.createElement("th",null,"Order ID"),n.a.createElement("th",null,"Created At"),n.a.createElement("th",null,"Total Price (BDT.)"))),n.a.createElement("tbody",null,this.props.orders?this.props.orders.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,t+1),n.a.createElement("td",null,e.orderID),n.a.createElement("td",null,new Date(e.createdAt).toLocaleDateString()),n.a.createElement("td",null,e.totalAmount))})):n.a.createElement("tr",null,n.a.createElement("td",null),n.a.createElement("td",null),n.a.createElement("td",null),n.a.createElement("td",null)))))}}]),r}(a.Component),Se=Object(p.b)((function(e,t){return{orders:e.products.ordersList,isWorking:e.ui.isWorking}}),{fetchOrders:function(){return function(e,t){var r=t().auth.userToken;e((function(e){return e({type:"TOGGLE_IS_WORKING"})})),q.a.get(j,{headers:{Authorization:"Bearer "+r}}).then((function(t){var r=t.data,a=r.messageType,n=r.messageBody;switch(a){case"error":return e(H(n)),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}));case"success":return e({type:"FETCH_ORDERS",payload:n}),e((function(e){return e({type:"FETCH_ORDERS_SUCCESS"})})),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}));default:return e((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}})).catch((function(t){return e(H("Unknown error occured when communicating with the server")),e((function(e){return e({type:"TOGGLE_IS_WORKING"})}))}))}}})(Ge);var ke=function(){return n.a.createElement("div",{className:"mt-4",style:{display:"inline-block",marginLeft:"auto",marginRight:"auto"}},n.a.createElement("h1",null,"The page was not found."),n.a.createElement(m.b,{to:"/"},n.a.createElement(J.a,{style:{marginTop:"2rem",width:"2rem",height:"2rem"},icon:"arrow-circle-left"})," "," ",n.a.createElement("h3",{style:{display:"inline-block"}},"Back to products page")))};var je=Object(ie.compose)(Object(p.b)((function(e,t){return{isUserAuthenticated:e.auth.isUserAuthenticated}}),{}),(function(e){return function(t){Object(u.a)(a,t);var r=Object(l.a)(a);function a(){return Object(i.a)(this,a),r.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.props.isUserAuthenticated?n.a.createElement(e,this.props):n.a.createElement(h.a,{to:g}))}}]),a}(a.Component)}));var Le=Object(ie.compose)(Object(p.b)((function(e,t){return{isUserAuthenticated:e.auth.isUserAuthenticated}}),{}),(function(e){return function(t){Object(u.a)(a,t);var r=Object(l.a)(a);function a(){return Object(i.a)(this,a),r.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.props.isUserAuthenticated?n.a.createElement(h.a,{to:v}):n.a.createElement(e,this.props))}}]),a}(a.Component)}));L.b.add(F.f,D.b,w.b,w.a,F.c,D.a,F.d,F.b,F.a,F.e);var Fe=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return this.props.isVerifyingToken?null:n.a.createElement("div",null,n.a.createElement(m.a,null,n.a.createElement(Y,null),n.a.createElement(d.a,null,n.a.createElement(h.d,null,n.a.createElement(h.b,{exact:!0,path:g,component:Le(ve)}),n.a.createElement(h.b,{exact:!0,path:O,component:Le(ve)}),n.a.createElement(h.b,{exact:!0,path:E,component:Le(ve)}),n.a.createElement(h.b,{exact:!0,path:f,component:Le(Re)}),n.a.createElement(h.b,{exact:!0,path:y,component:je(Ie)}),n.a.createElement(h.b,{exact:!0,path:b,component:je(Se)}),n.a.createElement(h.b,{exact:!0,path:v,component:je(Oe)}),n.a.createElement(h.b,{component:ke})))))}}]),r}(a.Component),we=Object(p.b)((function(e,t){return{isVerifyingToken:e.ui.isVerifyingToken}}),{})(Fe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var De=r(70),Ae=r(71),Ne=r(37),Pe={productsList:null,favoritesList:null,ordersList:null,latestOrder:null},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS":return Object(ye.a)(Object(ye.a)({},e),{},{productsList:t.payload});case"FETCH_FAVORITE_PRODUCTS":return Object(ye.a)(Object(ye.a)({},e),{},{favoritesList:t.payload});case"ADD_TO_FAVORITES":return Object(ye.a)(Object(ye.a)({},e),{},{favoritesList:[].concat(Object(Ne.a)(e.favoritesList),[t.payload])});case"REMOVE_FROM_FAVORITES":return Object(ye.a)(Object(ye.a)({},e),{},{favoritesList:e.favoritesList.filter((function(e){return e!==t.payload}))});case"PLACE_ORDER":return Object(ye.a)(Object(ye.a)({},e),{},{latestOrder:t.payload});case"FETCH_ORDERS":return Object(ye.a)(Object(ye.a)({},e),{},{ordersList:t.payload});default:return e}},We={fetchProducts:{error:!1,errorMessage:null},fetchFavoriteProducts:{error:!1,errorMessage:null},fetchOrders:{error:!1,errorMessage:null},addToFavorites:{error:!1,errorMessage:null},removeFromFavorites:{error:!1,errorMessage:null},login:{error:!1,errorMessage:null},signup:{error:!1,errorMessage:null},order:{success:!1,error:!1,errorMessage:null},isVerifyingToken:!1,isWorking:!1},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_IS_WORKING":return Object(ye.a)(Object(ye.a)({},e),{},{isWorking:!e.isWorking});case"FETCH_PRODUCTS_SUCCESS":return Object(ye.a)(Object(ye.a)({},e),{},{fetchProducts:{error:!1,errorMessage:null}});case"FETCH_PRODUCTS_FAIL":return Object(ye.a)(Object(ye.a)({},e),{},{fetchProducts:{error:!0,errorMessage:t.payload}});case"FETCH_FAVORITE_PRODUCTS_FAILED":return Object(ye.a)(Object(ye.a)({},e),{},{fetchFavoriteProducts:{error:!0,errorMessage:t.payload}});case"FETCH_FAVORITE_PRODUCTS_SUCCESS":return Object(ye.a)(Object(ye.a)({},e),{},{fetchFavoriteProducts:{error:!1,errorMessage:null}});case"ADD_TO_FAVORITES_FAILED":return Object(ye.a)(Object(ye.a)({},e),{},{addToFavorites:{error:!0,errorMessage:t.payload}});case"ADD_TO_FAVORITES_SUCCESS":return Object(ye.a)(Object(ye.a)({},e),{},{addToFavorites:{error:!1,errorMessage:null}});case"REMOVE_FROM_FAVORITES_FAILED":return Object(ye.a)(Object(ye.a)({},e),{},{removeFromFavorites:{error:!0,errorMessage:t.payload}});case"REMOVE_FROM_FAVORITES_SUCCESS":return Object(ye.a)(Object(ye.a)({},e),{},{removeFromFavorites:{error:!1,errorMessage:null}});case"CLEAR_ERRORS":return Object(ye.a)(Object(ye.a)({},e),{},{fetchProducts:{error:!1,errorMessage:null},addToFavorites:{error:!1,errorMessage:null},fetchOrders:{error:!1,errorMessage:null},removeFromFavorites:{error:!1,errorMessage:null},login:{error:!1,errorMessage:null},signup:{error:!1,errorMessage:null},fetchFavoriteProducts:{error:!1,errorMessage:null},order:{success:!1,error:!1,errorMessage:null}});case"LOGIN_ERROR":return Object(ye.a)(Object(ye.a)({},e),{},{login:{error:!0,errorMessage:t.payload}});case"SIGNUP_ERROR":return Object(ye.a)(Object(ye.a)({},e),{},{signup:{error:!0,errorMessage:t.payload}});case"ORDER_SUCCESS":return Object(ye.a)(Object(ye.a)({},e),{},{order:{success:!0,error:!1,errorMessage:null}});case"ORDER_FAILED":return Object(ye.a)(Object(ye.a)({},e),{},{order:{success:!1,error:!0,errorMessage:t.payload}});case"FETCH_ORDERS_FAILED":return Object(ye.a)(Object(ye.a)({},e),{},{fetchOrders:{error:!0,errorMessage:t.payload}});case"FETCH_ORDERS_SUCCESS":return Object(ye.a)(Object(ye.a)({},e),{},{fetchOrders:{error:!1,errorMessage:!0}});case"TOGGLE_VERIFYING_TOKEN":return Object(ye.a)(Object(ye.a)({},e),{},{isVerifyingToken:!e.isVerifyingToken});default:return e}},Ke={cartProducts:[]},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":var r=t.payload;return r.quantity=1,Object(ye.a)(Object(ye.a)({},e),{},{cartProducts:e.cartProducts.concat(r)});case"REMOVE_FROM_CART":return Object(ye.a)(Object(ye.a)({},e),{},{cartProducts:e.cartProducts.filter((function(e){return e.productID!==t.payload}))});case"UPDATE_QUANTITY":var a=t.payload,n=a.quantity,o=a.productID,c=e.cartProducts.findIndex((function(e){return e.productID===o})),i=e.cartProducts[c].quantity;return i>0&&0===(i+=n)&&(i=1),Object(ye.a)(Object(ye.a)({},e),{},{cartProducts:[].concat(Object(Ne.a)(e.cartProducts.slice(0,c)),[Object(ye.a)(Object(ye.a)({},e.cartProducts[c]),{},{quantity:i})],Object(Ne.a)(e.cartProducts.slice(c+1)))});case"CLEAR_CART":return Object(ye.a)(Object(ye.a)({},e),{},{cartProducts:[]});default:return e}},Be={isUserAuthenticated:!1,userToken:null},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(ye.a)(Object(ye.a)({},e),{},{isUserAuthenticated:!0,userToken:t.payload});case"LOGIN_FAIL":case"SIGNUP_FAIL":case"LOGOUT":return Object(ye.a)(Object(ye.a)({},e),{},{isUserAuthenticated:!1,userToken:null});default:return e}},He=Object(ie.combineReducers)({products:Ue,ui:Me,cart:Ve,auth:xe}),ze=[Ae.a],qe=Object(ie.createStore)(He,{},Object(De.composeWithDevTools)(ie.applyMiddleware.apply(void 0,ze)));r(101);qe.dispatch((function(e){e((function(e){return e({type:"TOGGLE_VERIFYING_TOKEN"})}));var t=window.localStorage.getItem("userToken");if(!t)return e({type:"LOGIN_FAIL"}),e(M(null)),e((function(e){return e({type:"TOGGLE_VERIFYING_TOKEN"})}));q.a.get(_,{headers:{Authorization:"Bearer "+t}}).then((function(r){return e({type:"LOGIN_SUCCESS",payload:t}),e((function(e){return e({type:"TOGGLE_VERIFYING_TOKEN"})}))})).catch((function(t){return 401===t.response.status?(e({type:"LOGIN_FAIL"}),e(M(null)),e((function(e){return e({type:"TOGGLE_VERIFYING_TOKEN"})}))):(e(M("Unknown error when communicating with the server.")),e((function(e){return e({type:"TOGGLE_VERIFYING_TOKEN"})})))}))})),c.a.render(n.a.createElement(p.a,{store:qe},n.a.createElement(n.a.StrictMode,null,n.a.createElement(we,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,r){e.exports=r(102)}},[[72,1,2]]]);
//# sourceMappingURL=main.2494712f.chunk.js.map